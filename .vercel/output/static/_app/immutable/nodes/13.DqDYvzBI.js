import{s as de,n as C,a as pe,r as we,c as G,d as Z}from"../chunks/scheduler.C6UnpWtt.js";import{S as fe,i as me,k as ee,l as te,a as d,d as u,m as s,g as _e,h as r,e as _,s as V,H as k,v as ae,c as h,f as P,o as q,w as se,x as le,B as re,r as ne,p as oe,y as ie}from"../chunks/index.C08rKovH.js";import{a as ce,c as F,i as ue}from"../chunks/store.CG4JpFtH.js";import{P as ye}from"../chunks/Play.D-0BqzBf.js";async function be({params:a,url:e,fetch:t}){const n=a.slug;return await(await t(`/api/song?id=${n}`)).json()}const je=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));function Ee(a){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(n){e=te(n,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var l=d(e);t=te(l,"path",{fill:!0,d:!0}),d(t).forEach(u),l.forEach(u),this.h()},h(){s(t,"fill","currentColor"),s(t,"d","M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6Z"),s(e,"class","glow h-8 w-8"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","24"),s(e,"height","24"),s(e,"viewBox","0 0 24 24")},m(n,l){_e(n,e,l),r(e,t)},p:C,i:C,o:C,d(n){n&&u(e)}}}class xe extends fe{constructor(e){super(),me(this,e,null,Ee,de,{})}}function $e(a){let e,t,n,l,c,o,f,x,H=a[0].title+"",i,$,D,he=a[0].subtitle.split("-")[0]+"",M,v,j,ve=a[0].more_info.album+"",L,T,B,ge=a[0].year+"",U,g,w,y,z,b,E,S,A,J;return y=new ye({}),E=new xe({}),{c(){e=_("div"),t=_("img"),l=V(),c=_("div"),o=_("div"),f=_("div"),x=new k(!1),i=V(),$=_("div"),D=new k(!1),M=V(),v=_("a"),j=new k(!1),L=V(),T=_("div"),B=new k(!1),U=V(),g=_("div"),w=_("button"),ae(y.$$.fragment),z=V(),b=_("button"),ae(E.$$.fragment),this.h()},l(m){e=h(m,"DIV",{class:!0});var I=d(e);t=h(I,"IMG",{class:!0,src:!0,alt:!0}),l=P(I),c=h(I,"DIV",{class:!0});var N=d(c);o=h(N,"DIV",{class:!0});var p=d(o);f=h(p,"DIV",{class:!0});var K=d(f);x=q(K,!1),K.forEach(u),i=P(p),$=h(p,"DIV",{});var Q=d($);D=q(Q,!1),Q.forEach(u),M=P(p),v=h(p,"A",{class:!0,href:!0,alt:!0});var R=d(v);j=q(R,!1),R.forEach(u),L=P(p),T=h(p,"DIV",{});var W=d(T);B=q(W,!1),W.forEach(u),p.forEach(u),U=P(N),g=h(N,"DIV",{class:!0});var O=d(g);w=h(O,"BUTTON",{class:!0});var X=d(w);se(y.$$.fragment,X),X.forEach(u),z=P(O),b=h(O,"BUTTON",{class:!0});var Y=d(b);se(E.$$.fragment,Y),Y.forEach(u),O.forEach(u),N.forEach(u),I.forEach(u),this.h()},h(){s(t,"class","rounded-lg"),pe(t.src,n=a[0].image)||s(t,"src",n),s(t,"alt",a[0].title),x.a=null,s(f,"class","font-bold"),D.a=null,j.a=null,s(v,"class","underline"),s(v,"href","/album/"+a[0].more_info.album_id),s(v,"alt",a[0].more_info.album),B.a=null,s(o,"class","truncate text-center"),s(w,"class","cursor-pointer"),s(b,"class","cursor-pointer"),s(g,"class","flex gap-8"),s(c,"class","info flex flex-col gap-2 items-center"),s(e,"class","h-[calc(100dvh-8rem)] flex justify-center items-center flex-col gap-2")},m(m,I){_e(m,e,I),r(e,t),r(e,l),r(e,c),r(c,o),r(o,f),x.m(H,f),r(o,i),r(o,$),D.m(he,$),r(o,M),r(o,v),j.m(ve,v),r(o,L),r(o,T),B.m(ge,T),r(c,U),r(c,g),r(g,w),le(y,w,null),r(g,z),r(g,b),le(E,b,null),S=!0,A||(J=[re(w,"click",a[1]),re(b,"click",a[2])],A=!0)},p:C,i(m){S||(ne(y.$$.fragment,m),ne(E.$$.fragment,m),S=!0)},o(m){oe(y.$$.fragment,m),oe(E.$$.fragment,m),S=!1},d(m){m&&u(e),ie(y),ie(E),A=!1,we(J)}}}function De(a,e,t){let n,l,c;G(a,ue,i=>t(4,n=i)),G(a,F,i=>t(5,l=i)),G(a,ce,i=>t(6,c=i));let{data:o}=e,f=o.songs[0];async function x(){Z(F,l=[f],l),Z(ue,n=0,n),Z(ce,c=l[n],c),(await(await fetch(`/api/reco?songid=${c.id}`)).json()).forEach(D=>{l.push(D)}),F.set(l)}let H=()=>{l.some(i=>i.id===f.id)===!1&&l.splice(n+1,0,f)};return a.$$set=i=>{"data"in i&&t(3,o=i.data)},[f,x,H,o]}class Be extends fe{constructor(e){super(),me(this,e,De,$e,de,{data:3})}}export{Be as component,je as universal};
