import{s as $,n as x,c as z,o as I}from"../chunks/scheduler.C6UnpWtt.js";import{S as q,i as E,k as g,l as p,a as d,d as u,m as r,g as w,h,e as D,v as N,s as P,c as j,w as k,f as M,x as C,r as y,p as b,q as O,y as F,u as B}from"../chunks/index.C08rKovH.js";import{S as V}from"../chunks/SongCard.Bb6yMGPs.js";import{e as L}from"../chunks/store.CG4JpFtH.js";async function T({url:l,fetch:e}){const a=l.searchParams.get("q")||1,i=l.searchParams.get("index")||1;return await(await e(`/api/search/songs?q=${a}&index=${i}`)).json()}const W=Object.freeze(Object.defineProperty({__proto__:null,load:T},Symbol.toStringTag,{value:"Module"}));function A(l){let e,a,i,s,t,n,c;return{c(){e=g("svg"),a=g("circle"),i=g("animate"),s=g("circle"),t=g("animate"),n=g("circle"),c=g("animate"),this.h()},l(f){e=p(f,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var o=d(e);a=p(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0});var m=d(a);i=p(m,"animate",{id:!0,fill:!0,attributeName:!0,begin:!0,dur:!0,values:!0}),d(i).forEach(u),m.forEach(u),s=p(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0,opacity:!0});var v=d(s);t=p(v,"animate",{fill:!0,attributeName:!0,begin:!0,dur:!0,values:!0}),d(t).forEach(u),v.forEach(u),n=p(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0,opacity:!0});var _=d(n);c=p(_,"animate",{id:!0,fill:!0,attributeName:!0,begin:!0,dur:!0,values:!0}),d(c).forEach(u),_.forEach(u),o.forEach(u),this.h()},h(){r(i,"id","svgSpinners3DotsFade0"),r(i,"fill","freeze"),r(i,"attributeName","opacity"),r(i,"begin","0;svgSpinners3DotsFade1.end-0.25s"),r(i,"dur","0.75s"),r(i,"values","1;.2"),r(a,"cx","4"),r(a,"cy","12"),r(a,"r","3"),r(a,"fill","currentColor"),r(t,"fill","freeze"),r(t,"attributeName","opacity"),r(t,"begin","svgSpinners3DotsFade0.begin+0.15s"),r(t,"dur","0.75s"),r(t,"values","1;.2"),r(s,"cx","12"),r(s,"cy","12"),r(s,"r","3"),r(s,"fill","currentColor"),r(s,"opacity",".4"),r(c,"id","svgSpinners3DotsFade1"),r(c,"fill","freeze"),r(c,"attributeName","opacity"),r(c,"begin","svgSpinners3DotsFade0.begin+0.3s"),r(c,"dur","0.75s"),r(c,"values","1;.2"),r(n,"cx","20"),r(n,"cy","12"),r(n,"r","3"),r(n,"fill","currentColor"),r(n,"opacity",".3"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"width","96"),r(e,"height","96"),r(e,"viewBox","0 0 24 24")},m(f,o){w(f,e,o),h(e,a),h(a,i),h(e,s),h(s,t),h(e,n),h(n,c)},p:x,i:x,o:x,d(f){f&&u(e)}}}class G extends q{constructor(e){super(),E(this,e,null,A,$,{})}}function S(l){let e,a,i;return a=new G({}),{c(){e=D("div"),N(a.$$.fragment),this.h()},l(s){e=j(s,"DIV",{class:!0});var t=d(e);k(a.$$.fragment,t),t.forEach(u),this.h()},h(){r(e,"class","w-full flex items-center justify-center")},m(s,t){w(s,e,t),C(a,e,null),i=!0},i(s){i||(y(a.$$.fragment,s),i=!0)},o(s){b(a.$$.fragment,s),i=!1},d(s){s&&u(e),F(a)}}}function H(l){let e,a,i,s;a=new V({props:{type:"song",list:l[0]}});let t=l[1]&&S();return{c(){e=D("div"),N(a.$$.fragment),i=P(),t&&t.c(),this.h()},l(n){e=j(n,"DIV",{class:!0});var c=d(e);k(a.$$.fragment,c),i=M(c),t&&t.l(c),c.forEach(u),this.h()},h(){r(e,"class","inner flex flex-col pb-4")},m(n,c){w(n,e,c),C(a,e,null),h(e,i),t&&t.m(e,null),s=!0},p(n,[c]){const f={};c&1&&(f.list=n[0]),a.$set(f),n[1]?t?c&2&&y(t,1):(t=S(),t.c(),y(t,1),t.m(e,null)):t&&(B(),b(t,1,1,()=>{t=null}),O())},i(n){s||(y(a.$$.fragment,n),y(t),s=!0)},o(n){b(a.$$.fragment,n),b(t),s=!1},d(n){n&&u(e),F(a),t&&t.d()}}}function J(l,e,a){let i;z(l,L,o=>a(4,i=o));let{data:s}=e,t=1,n=s.results,c=!1;const f=async()=>{t<=15&&(a(1,c=!0),t++,(await(await fetch(`/api/search/songs?q=${i}&index=${t}`)).json()).results.forEach(v=>n.push(v)),a(0,n),a(1,c=!1))};return I(()=>{async function o(v){let _=v[0];_.isIntersecting&&(await f(),m.unobserve(_.target),m.observe(document.querySelector(".songcard:last-of-type")))}const m=new IntersectionObserver(o,{threshold:1});m.observe(document.querySelector(".songcard:last-of-type"))}),l.$$set=o=>{"data"in o&&a(2,s=o.data)},[n,c,s]}class X extends q{constructor(e){super(),E(this,e,J,H,$,{data:2})}}export{X as component,W as universal};
